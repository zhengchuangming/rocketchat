<template name="adminUsers">
	<div class="main-content-flex">
		<section class="page-container page-list flex-tab-main-content">
			{{> header sectionName="Users"}}
			<div class="content">
				{{#unless hasPermission 'view-user-administration'}}
					<p>{{_ "You_are_not_authorized_to_view_this_page"}}</p>
				{{else}}
					<form class="search-form" role="form">
						<div class="rc-input__wrapper">
							<div class="rc-input__icon">
								{{#if isReady}}
									{{> icon block="rc-input__icon-svg" icon="magnifier" }}
								{{else}}
									{{> loading }}
								{{/if}}
							</div>
							<input id="users-filter" type="text" class="rc-input__element"
								   placeholder="{{_ "Search"}}" autofocus dir="auto">
					 	</div>
					</form>
				{{#if isSuperAdmin}}
					<div>
						<div style = "display: inline-block;">
							<input type="radio" id="All" name="scope" value="All"
								   checked>
							<label for="All">All</label>
						</div>

						<div  style = "display: inline-block;">
							<input type="radio" id="SiteManager" name="scope" value="SiteManager">
							<label for="SiteManager">SiteManager</label>
						</div>

						<div  style = "display: inline-block;">
							<input type="radio" id="User" name="scope" value="User">
							<label for="User">User</label>
						</div>

						<div style = "display: inline-block;margin-left:20px;">
							{{#let lstSite=enableSites}}
							<select id="urlSelect" class="rc-input rc-form-item-inline rc-input--small">
								<option value="placeholder" disabled selected>{{_ "Select_URL"}}</option>
								<option value="All">All</option>
								{{#each lstSite}}
									<option value="{{_id}}">{{_id}}</option>
								{{/each}}
							</select>
							{{/let}}
						</div>
					</div>
				{{/if}}
					<div class="results">
						<!--except yourself from all users(minus one)-->
						{{{_ "Showing_results" getUsersCount}}}
					</div>
					<div class="list">
						<table class="secondary-background-color">
							<thead>
								<tr class="admin-table-row">
									{{#if isSuperAdmin}}
										<th class="content-background-color border-component-color">&nbsp;</th>
										<th class="content-background-color border-component-color" width="20%">{{_ "SiteUrl"}}</th>
										<th class="content-background-color border-component-color" width="15%">{{_ "Name"}}</th>
										<th class="content-background-color border-component-color" width="20%">{{_ "Username"}}</th>
										<th class="content-background-color border-component-color" width="25%">{{_ "Email"}}</th>
										<th class="content-background-color border-component-color" width="20%">{{_ "Roles"}}</th>
										<th class="content-background-color border-component-color" width="15%">{{_ "Status"}}</th>
									{{else}}
										<th class="content-background-color border-component-color">&nbsp;</th>
										<th class="content-background-color border-component-color" width="25%">{{_ "Name"}}</th>
										<th class="content-background-color border-component-color" width="25%">{{_ "Username"}}</th>
										<th class="content-background-color border-component-color" width="30%">{{_ "Email"}}</th>
										<th class="content-background-color border-component-color" width="20%">{{_ "Roles"}}</th>
										<th class="content-background-color border-component-color" width="15%">{{_ "Status"}}</th>
									{{/if}}
								</tr>
							</thead>
							<tbody>
								{{#each users}}
									{{#unless isYou username}}
										{{#unless isSuperAdminUser roles}}
											<tr class="user-info row-link {{#if not active}}deactivated{{/if}}">
												<td class="border-component-color">
													<div class="user-image status-{{status}}">
														{{> avatar username=username}}
													</div>
												</td>
												{{#if isSuperAdmin}}
													<td class="border-component-color">{{site_id}}</td>
												{{/if}}
												<td class="border-component-color">{{name}}</td>
												<td class="border-component-color">{{username}}</td>
												<td class="border-component-color">{{emailAddress}}</td>
												<td class="border-component-color">{{roles}}</td>
												<td class="border-component-color">{{status}}</td>
											</tr>
										{{/unless}}
									{{/unless}}
								{{/each}}
							</tbody>
						</table>

						{{#if hasMore}}
							<button class="button secondary load-more {{isLoading}}">{{_ "Load_more"}}</button>
						{{/if}}
					</div>
				{{/unless}}
			</div>
		</section>
		{{#with flexData}}
			{{> flexTabBar}}
		{{/with}}
	</div>
</template>
